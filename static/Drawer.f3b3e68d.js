var X=Object.defineProperty,Y=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var I=(e,a,r)=>a in e?X(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,y=(e,a)=>{for(var r in a||(a={}))P.call(a,r)&&I(e,r,a[r]);if(N)for(var r of N(a))q.call(a,r)&&I(e,r,a[r]);return e},z=(e,a)=>Y(e,Z(a));var L=(e,a)=>{var r={};for(var s in e)P.call(e,s)&&a.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&N)for(var s of N(e))a.indexOf(s)<0&&q.call(e,s)&&(r[s]=e[s]);return r};import{a as M}from"./util.43d19722.js";import{h as A,_ as H}from"./index.b1bc12a8.js";import{h as R,r as f,t as G,P as J,w as K,k as C,l as b,y as S,C as u,D as t,N as T,M as j,q as U,O as v,L as F,z as O,U as Q,V as x,H as ee,I as ae}from"./element-plus.b05a9d59.js";const $={getSubList:"/api/company/query",getSubView:"/api/company/view",subAdd:"/api/company/add",subEdit:"/api/company/edit",editStatus:"/api/company/editStatus"};function Ee(e){return A({url:$.getSubList,method:"post",data:e})}function le(e){return A({url:$.getSubView,method:"post",data:{id:e}})}function ue(e){return A({url:$.subAdd,method:"post",data:e})}function te(e){return A({url:$.subEdit,method:"post",data:e})}function oe(e,a){return A({url:$.editStatus,method:"post",data:{id:e,status:a}})}var _;(function(e){e[e.online=0]="online",e[e.offline=1]="offline"})(_||(_={}));const ne=R({props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,a){const r=f([]);let s=f(),d=f([]),h=f(),o=f([]),p=f(),l=f([]),c=f([]),{modelValue:g}=G(e);const E=async()=>{let n=await M();console.log("treeData data",n),r.value=n,n&&n.length&&(d.value=n[0].children),g.value.length&&!c.value.length&&(c.value=[...g.value],D())},D=()=>{c.value.length>0&&(s.value=c.value[0],m(r.value)),c.value.length>1&&(h.value=c.value[1],m(o.value,!0)),c.value.length>2&&(p.value=c.value[2])};J(E),K(g,n=>{n.length&&n.join(",")!==c.value.join(",")&&(c.value=n,D())});let V=()=>{let n=[];s.value&&n.push(s.value),h.value&&n.push(h.value),p.value&&n.push(p.value),c.value=n,a.emit("update:modelValue",n)},m=(n,W)=>{n.map(B=>{B.id===s.value||B.id===h.value?W?l.value=B.children:o.value=B.children:B.children&&m(B.children)})};return{treeData:r,province:s,provinceOptions:d,city:h,cityOptions:o,area:p,areaOptions:l,onCityChange:n=>{p.value="",l.value=[],n&&m(o.value,!0),V()},onProvinceChange:n=>{h.value="",p.value="",o.value=[],l.value=[],n&&m(r.value),V()},onAreaChange:()=>{V()}}}});function re(e,a,r,s,d,h){const o=C("el-option"),p=C("el-select");return b(),S("div",null,[u(p,{modelValue:e.province,"onUpdate:modelValue":a[0]||(a[0]=l=>e.province=l),placeholder:"\u7701",clearable:"",style:{width:"33.33%"},onChange:e.onProvinceChange},{default:t(()=>[(b(!0),S(T,null,j(e.provinceOptions,l=>(b(),U(o,{key:l.id,label:l.label,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),u(p,{modelValue:e.city,"onUpdate:modelValue":a[1]||(a[1]=l=>e.city=l),placeholder:"\u5E02",clearable:"",style:{width:"33.33%"},onChange:e.onCityChange},{default:t(()=>[(b(!0),S(T,null,j(e.cityOptions,l=>(b(),U(o,{key:l.id,label:l.label,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),u(p,{modelValue:e.area,"onUpdate:modelValue":a[2]||(a[2]=l=>e.area=l),placeholder:"\u533A",clearable:"",style:{width:"33.33%"},onChange:e.onAreaChange},{default:t(()=>[(b(!0),S(T,null,j(e.areaOptions,l=>(b(),U(o,{key:l.id,label:l.label,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])}var se=H(ne,[["render",re]]);const de=(e,a)=>{const{formData:r,modelValue:s}=G(e),d=f({id:0,name:"",shortName:"",legalPerson:"",phone:"",address:"",status:0}),h=f([]),o=f([]),p=f(!1),l=async m=>{const i=await le(m);d.value=y({},i.data.body),o.value=[],d.value.provinceCode&&o.value.push(d.value.provinceCode),d.value.cityCode&&o.value.push(d.value.cityCode),d.value.regionCode&&o.value.push(d.value.regionCode)};K(s,m=>{m&&(d.value=y({},r.value),d.value.id?(p.value=!0,l(d.value.id)):p.value=!1)}),J(async()=>{let m=await M();h.value=m});const g=()=>{a.emit("update:modelValue",!1)};return{isShow:p,currentFormData:d,treeData:h,ISubStatus:_,pcrData:o,handleClose:g,handleSubmit:async()=>{const n=d.value,{id:m,status:i}=n,w=L(n,["id","status"]);let k={provinceCode:o.value.length>0?o.value[0]:"",cityCode:o.value.length>0?o.value[1]:"",regionCode:o.value.length>0?o.value[2]:""};m?await te(z(y(y({},w),k),{id:m})):await ue(y(y({},w),k)),Q.success({message:"\u64CD\u4F5C\u6210\u529F",type:"success"}),a.emit("get-view"),g()},handleShowEdit:()=>{p.value=!1},handleChange:async()=>{let{id:m,name:i,status:w}=d.value,k=w===_.online?_.offline:_.online;x.confirm(`\u786E\u8BA4${w===_.online?"\u7981\u7528":"\u542F\u7528"}\u3010${i}\u3011`,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{await oe(m,k),Q.success({message:"\u64CD\u4F5C\u6210\u529F",type:"success"}),l(d.value.id)})},sysTypeS:[{label:"\u90E8\u95E8\u7C7B\u578B",value:1}],companys:[{label:"\u6240\u5C5E\u516C\u53F8",value:4}]}},ie=R({components:{Distpicker:se},props:{formData:{type:Object,default:()=>({})},modelValue:{type:Boolean,default:!1}},setup(e,a){return y({},de(e,a))}}),pe=e=>(ee("data-v-105b94bb"),e=e(),ae(),e),me={key:0},ce=v("\u8FD4\u56DE"),ve=v("\u5206\u516C\u53F8\u8BE6\u60C5 "),fe={class:"justify-between sub-header"},he={class:"title"},Ce=v("\u7F16\u8F91"),Fe=pe(()=>O("br",null,null,-1)),be={key:1},De=v("\u53D6\u6D88"),ge=v("\u4FDD\u5B58");function ye(e,a,r,s,d,h){const o=C("el-button"),p=C("DrawerHeader"),l=C("el-form-item"),c=C("el-col"),g=C("el-row"),E=C("el-form"),D=C("el-input"),V=C("Distpicker"),m=C("el-drawer");return b(),U(m,{modelValue:e.modelValue,"onUpdate:modelValue":a[6]||(a[6]=i=>e.modelValue=i),title:e.currentFormData.id?"\u7F16\u8F91\u5206\u516C\u53F8":"\u6DFB\u52A0\u5206\u516C\u53F8",direction:"rtl","before-close":e.handleClose,"destroy-on-close":"",size:"50%","with-header":!1},{default:t(()=>[e.isShow?(b(),S("div",me,[u(p,null,{title:t(()=>[u(o,{class:"mr-5",size:"medium"},{default:t(()=>[ce]),_:1}),ve]),default:t(()=>[u(o,{type:"text",class:"el-button--danger",onClick:e.handleChange},{default:t(()=>[v(F(e.currentFormData.status===e.ISubStatus.online?"\u7981\u7528":"\u542F\u7528"),1)]),_:1},8,["onClick"])]),_:1}),O("div",fe,[O("div",null,[O("div",he,F(e.currentFormData.shortName),1),v(" "+F(e.currentFormData.name),1)]),u(o,{type:"primary",plain:"",size:"medium",onClick:e.handleShowEdit},{default:t(()=>[Ce]),_:1},8,["onClick"])]),u(E,null,{default:t(()=>[u(g,null,{default:t(()=>[u(c,{span:12},{default:t(()=>[u(l,{label:"\u72B6\u6001:"},{default:t(()=>[v(" \u5DF2"+F(e.currentFormData.status===e.ISubStatus.online?"\u542F\u7528 ":"\u7981\u7528"),1)]),_:1})]),_:1}),u(c,{span:12},{default:t(()=>[u(l,{label:"\u4F01\u4E1A\u6CD5\u4EBA:"},{default:t(()=>[v(F(e.currentFormData.legalPerson),1)]),_:1})]),_:1}),u(c,{span:12},{default:t(()=>[u(l,{label:"\u8054\u7CFB\u5730\u5740:"},{default:t(()=>[v(F(e.currentFormData.provinceName)+F(e.currentFormData.cityName)+F(e.currentFormData.regionName)+" ",1),Fe,v(F(e.currentFormData.address),1)]),_:1})]),_:1}),u(c,{span:12},{default:t(()=>[u(l,{label:"\u8054\u7CFB\u65B9\u5F0F:"},{default:t(()=>[v(F(e.currentFormData.phone),1)]),_:1})]),_:1})]),_:1})]),_:1})])):(b(),S("div",be,[u(p,null,{title:t(()=>[v(F(e.currentFormData.id?"\u7F16\u8F91\u5206\u516C\u53F8":"\u65B0\u589E\u5206\u516C\u53F8"),1)]),default:t(()=>[u(o,{onClick:e.handleClose},{default:t(()=>[De]),_:1},8,["onClick"]),u(o,{type:"primary",onClick:e.handleSubmit},{default:t(()=>[ge]),_:1},8,["onClick"])]),_:1}),u(E,{"label-width":"120px",model:e.currentFormData},{default:t(()=>[u(l,{label:"\u516C\u53F8\u5168\u79F0",required:""},{default:t(()=>[u(D,{modelValue:e.currentFormData.name,"onUpdate:modelValue":a[0]||(a[0]=i=>e.currentFormData.name=i)},null,8,["modelValue"])]),_:1}),u(l,{label:"\u516C\u53F8\u7B80\u79F0"},{default:t(()=>[u(D,{modelValue:e.currentFormData.shortName,"onUpdate:modelValue":a[1]||(a[1]=i=>e.currentFormData.shortName=i)},null,8,["modelValue"])]),_:1}),u(l,{label:"\u4F01\u4E1A\u6CD5\u4EBA",required:""},{default:t(()=>[u(D,{modelValue:e.currentFormData.legalPerson,"onUpdate:modelValue":a[2]||(a[2]=i=>e.currentFormData.legalPerson=i)},null,8,["modelValue"])]),_:1}),u(l,{label:"\u8054\u7CFB\u65B9\u5F0F",required:""},{default:t(()=>[u(D,{modelValue:e.currentFormData.phone,"onUpdate:modelValue":a[3]||(a[3]=i=>e.currentFormData.phone=i)},null,8,["modelValue"])]),_:1}),u(l,{label:"\u8054\u7CFB\u5730\u5740"},{default:t(()=>[u(V,{modelValue:e.pcrData,"onUpdate:modelValue":a[4]||(a[4]=i=>e.pcrData=i)},null,8,["modelValue"]),u(D,{modelValue:e.currentFormData.address,"onUpdate:modelValue":a[5]||(a[5]=i=>e.currentFormData.address=i),placeholder:"\u8BE6\u7EC6\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]))]),_:1},8,["modelValue","title","before-close"])}var _e=H(ie,[["render",ye],["__scopeId","data-v-105b94bb"]]),ke=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_e});export{_e as D,_ as I,ke as a,oe as e,Ee as g};
